<!-- Elements added to main will be displayed on all pages -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A next-gen documentation site for HCL Connections.">
      
      
      
        <link rel="canonical" href="https://opensource.hcltechsw.com/connections/latest/admin/install/cp_install_services_tasks.html">
      
      
        <link rel="prev" href="cp_upgrade_considerations_for_side_by_side_migration.html">
      
      
        <link rel="next" href="installing_mongodb_7_for_component_pack_8.html">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Steps to install or upgrade to Component Pack 8 - HCL Connections 8.0 CR11 Help Center</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
       
 <!-- SmartCat script-->
  <script id='sc-script' src="https://cdn.smartcat-proxy.com/3c07f7dc8f16449b9e961c35089912a5/script-v1/__translator.js?hash=4875a4cc718c7ca6fb804c818c178bd6"></script>
  <!-- End SmartCat script -->

  <link rel="canonical" href="https://opensource.hcltechsw.com/connections-doc/v8-cr4/">
  
<!--  OneTrust Cookies Consent Notice start  -->
<script type="text/javascript" src="https://cdn.cookielaw.org/consent/99b8d579-c52a-43c9-ab7b-a35e60de7103/OtAutoBlock.js"></script>
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="99b8d579-c52a-43c9-ab7b-a35e60de7103"></script>
<script type="text/javascript"> 
	function OptanonWrapper() { } 
</script>
<!--  OneTrust Cookies Consent Notice end  -->

<!--  Global site tag (gtag.js) - Google Analytics start -->
<script src="https://www.googletagmanager.com/gtag/js?id=UA-169645537-2" class="optanon-category-C0002-C0003-C0004-C0005"></script>
<script type="text/plain" class="optanon-category-C0002-C0003-C0004-C0005">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

 

  gtag('config', 'UA-169645537-2');
  gtag('config', 'G-7LF0XY95M1');
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TNNFCCM');</script>
  <!-- End Google Tag Manager -->
  
  
<!--  Global site tag (gtag.js) - Google Analytics end -->
    
    
    

  <meta property="og:image" content="https://opensource.hcltechsw.com/digital-experience/site-thumbnail.png" />



  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cp_install_services_tasks" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            

    
<div>

   <a href="https://www.hcltechsw.com/"> 
  <img width="150" height="30" src="https://help.hcltechsw.com/assets/images/HCL_Software_Logo_White.svg" alt="HCL Logo" target="_blank"></a>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   
<div class="dropdown">

  <button class="dropbtn">Resources <i class="fa fa-caret-down"></i></button> 
  <div class="dropdown-content">
  <a href="https://support.hcltechsw.com" target="_blank">Customer Support</a>
  <a href="https://hclsoftwareu.hcltechsw.com/" target="_blank">HCLSoftware U</a>
  <a href="https://developer.ds.hcl-software.com/c/hcl-connections/connections-forum/22" target="_blank">Community Forums</a>

</div>
</div>

<div style='float: right;display: inline-block;width: 140px;margin-top: -7px;'>
     <span id='scLangSelectorContainer' style='z-index: 1000; position: absolute; right:200.95px;'/>
</div>

  <!-- Uncomment the following announcement if you need it -->
  <!--
 <div class="md-banner--feedback" style="display:inline">

  <strong>We value your feedback on this site.</strong> Please report any issues you find <a class="announcement__link" href="https://github.com/HCL-TECH-SOFTWARE/digital-experience/issues">via Github</a>. 
  
  <div class="md-banner--feedback">Looking for v8.5 or v9.0? <a class="announcement__link"  href="https://help.hcltechsw.com/digital-experience/9.5/welcome_hcl_dx.html">Check the legacy Help Center.</a>
</div>  
</div>
-->

</div>
  


          </div>
          
        </aside>
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              

  You're not viewing the latest version.
  <a href="https://help.hcl-software.com/connections/latest/">    
    <strong>Click here to go to the latest.</strong>
  </a>



            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../index.html" title="HCL Connections 8.0 CR11 Help Center" class="md-header__button md-logo" aria-label="HCL Connections 8.0 CR11 Help Center" data-md-component="logo">
      
  <img src="../../assets/CNX_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HCL Connections 8.0 CR11 Help Center
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Steps to install or upgrade to Component Pack 8
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HCL-TECH-SOFTWARE/connections-doc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hcl-software/connections-doc
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
    
  
  Introducing Connections

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../overview/whats_new.html" class="md-tabs__link">
          
  
    
  
  What&apos;s new in Connections&quest;

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../welcome/welcome_admin.html" class="md-tabs__link">
          
  
    
  
  Administering Connections 8.0

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../user/welcome/welcome_end_user.html" class="md-tabs__link">
          
  
    
  
  Using Connections 8.0

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../connectors/admin/c_connectors_over.html" class="md-tabs__link">
          
  
    
  
  Integrating with other products

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide_me/guide_me.html" class="md-tabs__link">
          
  
    
  
  Guide Me

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="HCL Connections 8.0 CR11 Help Center" class="md-nav__button md-logo" aria-label="HCL Connections 8.0 CR11 Help Center" data-md-component="logo">
      
  <img src="../../assets/CNX_logo.png" alt="logo">

    </a>
    HCL Connections 8.0 CR11 Help Center
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HCL-TECH-SOFTWARE/connections-doc" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    hcl-software/connections-doc
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introducing Connections
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../overview/whats_new.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    What&apos;s new in Connections&quest;
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Administering Connections 8.0
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Administering Connections 8.0
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../welcome/welcome_admin.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Administering Connections 8.0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../overview/c_lc4_product_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Product Overview
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../plan/c_installation_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Planning
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="c_installing.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Installing Connections
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installing or upgrading Component Pack for Connections
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Installing or upgrading Component Pack for Connections
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_install_config_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing or upgrading Component Pack for Connections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_install_offerings.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Component Pack offerings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_over_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview of Component Pack architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="cp_prereqs.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Prerequisites for Component Pack
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5_5" id="__nav_3_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation and upgrade
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_5_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5_5">
            <span class="md-nav__icon md-icon"></span>
            Installation and upgrade
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_install_upgrade_container.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation and upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="upgrade_considerations.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade considerations for Component Pack 8
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_upgrade_considerations_for_side_by_side_migration.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrade considerations for side-by-side migration of data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5_5_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5_5_4" id="__nav_3_5_5_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Steps to install or upgrade to Component Pack 8
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_5_5_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5_5_4">
            <span class="md-nav__icon md-icon"></span>
            Steps to install or upgrade to Component Pack 8
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Steps to install or upgrade to Component Pack 8
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="cp_install_services_tasks.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Steps to install or upgrade to Component Pack 8
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#section_awd_rwp_tnb" class="md-nav__link">
    <span class="md-ellipsis">
      Before you begin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_v5r_1dj_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Installation vs. upgrade steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_e4p_jrp_tnb" class="md-nav__link">
    <span class="md-ellipsis">
      Set up NFS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up NFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements-for-persistent-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements for persistent volumes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-the-persistent-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      Exporting the persistent volumes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_ln3_qp3_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Create the namespace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup_es7" class="md-nav__link">
    <span class="md-ellipsis">
      Back up Elasticsearch 7 data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup_nfs" class="md-nav__link">
    <span class="md-ellipsis">
      Set up OpenSearch and MongoDB volumes on NFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstall_charts_k8s125" class="md-nav__link">
    <span class="md-ellipsis">
      Uninstall charts before upgrading to Kubernetes v1.25
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harbor_repo" class="md-nav__link">
    <span class="md-ellipsis">
      Log in to a Harbor OCI registry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psa_namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Apply Pod security restrictions at the namespace level
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup_helm" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Helm charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pv_pvc" class="md-nav__link">
    <span class="md-ellipsis">
      Set up persistent volumes and persistent volume claims on NFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      Set up bootstrap charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cnx_env" class="md-nav__link">
    <span class="md-ellipsis">
      Set up connections-env chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del_ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Delete ingresses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inst_mongo7" class="md-nav__link">
    <span class="md-ellipsis">
      Install MongoDB 7
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infra_chart" class="md-nav__link">
    <span class="md-ellipsis">
      Set up infrastructure charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_n3c_xhj_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Customizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate_mongo5" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate MongoDB data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os_chart" class="md-nav__link">
    <span class="md-ellipsis">
      Set up OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate_es" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate ElasticSearch data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orientme_os" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Orient Me for OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Orient Me for OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics_os" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Metrics for OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Metrics for OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_2" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_2" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comm_ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Set up community ingress
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teams_integ" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Microsoft Teams integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comm_tailored" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Tailored Experience features for communities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lotusxml" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the LotusConnections-config.xml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activities_plus" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Activities Plus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Activities Plus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_3" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_3" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ms_outlook_addin" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Connections add-in for Microsoft Outlook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Connections add-in for Microsoft Outlook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_4" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_4" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="installing_mongodb_7_for_component_pack_8.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Installing MongoDB 7 for Component Pack 8
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="migrating_data_mongodb_v5_v7.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Migrating data from MongoDB 5 to 7
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_migrate_data_from_es7_to_opensearch.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrating data from Elasticsearch 7 to OpenSearch
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_openshift.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Component Pack on OpenShift
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_eks.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Component Pack using EKS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="helm_docs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helm chart documentation for Component Pack
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="cp_config_intro.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Configuring the Component Pack
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_t_customize_email_notifications.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Customizing email notifications using the app registry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="cp_3p_integrate_with_other_products.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Integrating with other apps
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_install_troubleshoot_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting Component Pack installation or upgrade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="cp_install_uninstall.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Uninstalling Component Pack
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="r_post-installation_tasks.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Post-installation tasks
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="c_optional_post-install_tasks.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Optional post-installation tasks
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="t_uninstall_over.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Uninstalling
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../migrate/c_upgrade_migrate_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Upgrading and updating
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../admin/c_lc_admin_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Administering
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../customize/c_customize_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Customizing
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../secure/c_sec_overview.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Security
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/pointer_to_connections_mobile_collections.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mobile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../develop/dev_intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../troubleshoot/ts_c_welcome.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Troubleshooting and support
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../user/welcome/welcome_end_user.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Using Connections 8.0
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../connectors/admin/c_connectors_over.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Integrating with other products
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../guide_me/guide_me.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Guide Me
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#section_awd_rwp_tnb" class="md-nav__link">
    <span class="md-ellipsis">
      Before you begin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_v5r_1dj_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Installation vs. upgrade steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_e4p_jrp_tnb" class="md-nav__link">
    <span class="md-ellipsis">
      Set up NFS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up NFS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements-for-persistent-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements for persistent volumes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exporting-the-persistent-volumes" class="md-nav__link">
    <span class="md-ellipsis">
      Exporting the persistent volumes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_ln3_qp3_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Create the namespace
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backup_es7" class="md-nav__link">
    <span class="md-ellipsis">
      Back up Elasticsearch 7 data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup_nfs" class="md-nav__link">
    <span class="md-ellipsis">
      Set up OpenSearch and MongoDB volumes on NFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uninstall_charts_k8s125" class="md-nav__link">
    <span class="md-ellipsis">
      Uninstall charts before upgrading to Kubernetes v1.25
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#harbor_repo" class="md-nav__link">
    <span class="md-ellipsis">
      Log in to a Harbor OCI registry
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#psa_namespace" class="md-nav__link">
    <span class="md-ellipsis">
      Apply Pod security restrictions at the namespace level
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup_helm" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Helm charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pv_pvc" class="md-nav__link">
    <span class="md-ellipsis">
      Set up persistent volumes and persistent volume claims on NFS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      Set up bootstrap charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cnx_env" class="md-nav__link">
    <span class="md-ellipsis">
      Set up connections-env chart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#del_ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Delete ingresses
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inst_mongo7" class="md-nav__link">
    <span class="md-ellipsis">
      Install MongoDB 7
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#infra_chart" class="md-nav__link">
    <span class="md-ellipsis">
      Set up infrastructure charts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section_n3c_xhj_dvb" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Customizer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate_mongo5" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate MongoDB data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#os_chart" class="md-nav__link">
    <span class="md-ellipsis">
      Set up OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrate_es" class="md-nav__link">
    <span class="md-ellipsis">
      Migrate ElasticSearch data
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#orientme_os" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Orient Me for OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Orient Me for OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_1" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_1" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics_os" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Metrics for OpenSearch
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Metrics for OpenSearch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_2" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_2" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comm_ingress" class="md-nav__link">
    <span class="md-ellipsis">
      Set up community ingress
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#teams_integ" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Microsoft Teams integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comm_tailored" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Tailored Experience features for communities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lotusxml" class="md-nav__link">
    <span class="md-ellipsis">
      Configure the LotusConnections-config.xml
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#activities_plus" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Activities Plus
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Activities Plus">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_3" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_3" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ms_outlook_addin" class="md-nav__link">
    <span class="md-ellipsis">
      Set up Connections add-in for Microsoft Outlook
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Set up Connections add-in for Microsoft Outlook">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites_4" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#procedure_4" class="md-nav__link">
    <span class="md-ellipsis">
      Procedure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/HCL-TECH-SOFTWARE/connections-doc/edit/main/docs/admin/install/cp_install_services_tasks.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 class="concept" id="cp_install_services_tasks">Steps to install or upgrade to Component Pack 8</h1>
<p>Use these steps to help you install the latest CR version of Component Pack 8 or replace Component Pack 7 or 8 with its latest CR version.</p>
<h2 class="section" id="section_awd_rwp_tnb">Before you begin</h2>
<p>For background information and where to get the latest download, see <a href="cp_install_upgrade_container.html">Installation and upgrade</a>.</p>
<p>When preparing to install or upgrade to the latest CR version of Component Pack 8, consider the recommendations in <a href="upgrade_considerations.html">Upgrade considerations for Component Pack 8</a>.</p>
<p>Before starting the steps, note the following:</p>
<p><strong>Ensure you have these:</strong></p>
<ul>
<li>
<p>A system running Connections (if you are upgrading from Component Pack 7, a system running Connections 7 with Component Pack and the latest CFix deployed).</p>
</li>
<li>
<p>Kubernetes up and running.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This article does not contain the initial steps to get your Kubernetes platform up and running. The base setup depends on your environment, which could be Kubernetes-only.</p>
</div>
</li>
<li>
<p>Access to the <a href="https://hclcr.io/harbor/projects/15/repositories">Harbor repository</a>.</p>
</li>
</ul>
<p><strong>Let's make a few assumptions about the environment:</strong> We are installing an environment which will be available behind nginx.example.com. However, this is just a public domain.</p>
<p>All the nodes are available using their FQDNs and are in a different domain:</p>
<ul>
<li>Connections, with WebSphere and IHS is on connections.internal.example.com</li>
<li>DB2 is on db1.internal.example.com</li>
<li>Kubernetes cluster is just a single node, and it is on cpmaster.internal.example.com</li>
<li>NFS master is collocated with connections.internal.example.com and its IP address is 172.27.1.48 and all our folders are created in 172.27.1.48:/pv-connections/</li>
</ul>
<p><strong>Network configuration</strong></p>
<p>All machines in our scenario are configured to use DNS and all of them have internet access. The initial entry point is nginx.example.com, which in our case can be reached from the internet. Your NGINX might reside behind a load balancer instead. To let the machines interoperate properly, consider the following inbound ports to be opened on your firewall:</p>
<ul>
<li>
<p>connections.internal.example.com:</p>
<ul>
<li>443 from nginx.example.com</li>
<li>443 from cpmaster.internal.example.com</li>
</ul>
</li>
<li>
<p>cpmaster.internal.example.com:</p>
<ul>
<li>30301 from connections.internal.example.com (Customizer)</li>
<li>30301 from nginx.example.com (Customizer)</li>
<li>30098 from connections.internal.example.com (Elasticsearch 7  Connections 7 only)</li>
<li>30099 from connections.internal.example.com (OpenSearch  Connections 7 or 8, Elasticsearch 5  Connections 6.5 only)</li>
<li>32080 from connections.internal.example.com (Ingress Controller, 32443 if TLS is enabled)</li>
<li>31810 from connections.internal.example.com (Microsoft Outlook add-in  Connections 7 only)</li>
</ul>
</li>
<li>
<p>nginx.example.com:</p>
<ul>
<li>443 from everywhere</li>
<li>80 from everywhere (in case you plan to redirect to 443 and no load balancer does this job)</li>
</ul>
</li>
</ul>
<p><strong>Storage configuration</strong></p>
<p>Starting with Connections 7.0, it is possible to use different types of storage. The recommended setup contains the configuration of a NFS v4 entry point to store both data from shared WebSphere-based Connections services, as well as claims and PVs from the Component Pack side.</p>
<h2 class="section" id="section_v5r_1dj_dvb">Installation vs. upgrade steps</h2>
<p>This document uses the preceding assumptions to walk you through the below steps to deploy the latest CR version of Component Pack 8. These steps generally appear in chronological order, but note that there are differences between the installation and upgrade procedures, including the upgrade from Component Pack 7 to 8, and Component Pack 8 to its latest CR version. Some of the following steps apply only to one scenario (install <em>or</em> upgrade), while others apply to both (install <em>and</em> upgrade). Refer to <a href="cp_install_upgrade_container.html#order_cp_install">Order of installation</a> for the complete list of steps for each scenario.</p>
<h2 class="section" id="section_e4p_jrp_tnb">Set up NFS</h2>
<p>As Connections supports various operating systems, each deployment environment must meet specific NFS requirements. The NFS prerequisites need to be determined by the system administrator for their deployment.</p>
<p>We don't recommend or support any particular configuration of NFS  you can use whatever NFS implementation is available. For the sake of this example, however, let's assume that our NFS master is on connections.internal.example.com, you have root access there, you installed NFS, you know how to manage it, and you just need the stuff needed for Component Pack.</p>
<p>Use the following guidelines to help you set up persistent volumes for Component Pack services for a high availability deployment.</p>
<h3 id="requirements-for-persistent-volumes">Requirements for persistent volumes</h3>
<p>These guidelines and sample files describe how to set up all of the persistent volumes required for a full installation of Component Pack. In a high availability configuration, the best practice is to maintain persistent storage away from the Kubernetes masters and worker nodes themselves, on a separate machine that all masters and workers can access.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The machine storing the persistent volumes in an HA configuration will not have Docker or Kubernetes installed.</p>
</div>
<h3 id="exporting-the-persistent-volumes">Exporting the persistent volumes</h3>
<ol>
<li>
<p>Perform these steps on NFS master:</p>
</li>
<li>
<p>Create /pv-connections folder on connections.internal.example.com with permissions 0700.  You may set the ownership to your desired owner and group.</p>
</li>
<li>Create a user with ID 1000 and another user with 1001, if not existing already, for OpenSearch and MongoDB to generate data.</li>
<li>
<p>Inside the folder, create the following set of subfolders.  You may set the ownership to your desired group while user ownership should be set to the user ID creating data during runtime.</p>
<ul>
<li>/pv-connections/customizations with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchbackup with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchmaster-0 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchmaster-1 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchmaster-2 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchdata-0 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchdata-1 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchdata-2 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchclient-0 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchclient-1 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/opensearchclient-2 with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/kudos-boards-minio with permissions 0700.  The folder should be owned by user ID 1000.</li>
<li>/pv-connections/mongo7-node-0/data/db with permissions 0700.  The folder should be owned by user ID 1001.</li>
<li>/pv-connections/mongo7-node-1/data/db with permissions 0700.  The folder should be owned by user ID 1001.</li>
<li>/pv-connections/mongo7-node-2/data/db with permissions 0700.  The folder should be owned by user ID 1001.</li>
</ul>
</li>
<li>
<p>Download nfsSetup.sh and volumes.txt from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/third_party/nfs-install/templates/nfsSetupScript">HCL Connections deployment automation Git repository</a> to a directory of your choice (for example, /tmp).</p>
</li>
<li>
<p>Provide execution permission to nfsSetup.sh and run it, then complete the configuration for NSF by doing the following:</p>
<ol>
<li>Install the required NFS packages, if not already installed by default.</li>
<li>Enable and start the required NFS services.</li>
<li>Restart the NFS server and configure the firewall.</li>
</ol>
</li>
<li>
<p><strong>(Optional)</strong> Export file systems:</p>
<p><code>exportfs -ra</code></p>
</li>
<li>
<p>Configure NFS clients by enabling and starting the nfs-server on all Kubernetes master and worker nodes:</p>
</li>
</ol>
<p><code>systemctl restart nfs-server</code></p>
<p>Ensure that all of the persistent volumes are exported and mountable from Kubernetes masters and workers nodes before you proceed to the next steps.</p>
<h2 class="section" id="section_ln3_qp3_dvb">Create the namespace</h2>
<p>On the server which has Helm v3 and kubectl configured for your non-root user, create the Connections namespace in Kubernetes by running the following command:</p>
<div id="codeblock_ajc_sp3_dvb" class="highlight"><pre><span></span><code>kubectl create namespace connections
</code></pre></div>
<h2 class="section" id="backup_es7">Back up Elasticsearch 7 data</h2>
<p>Register the snapshot repository in Elasticsearch 7:</p>
<ol>
<li>
<p>Connect to an Elasticsearch 7 client pod by running the following command:</p>
<p><code>kubectl exec -ti -n connections $(kubectl get pods -n connections | grep es-client | awk '{print $1}') -- bash</code></p>
</li>
<li>
<p>Enter the following commands, which make use of the sendRequest utility to communicate with Elasticsearch 7:</p>
<div class="highlight"><pre><span></span><code>/opt/elasticsearch-7.10.1/probe/sendRequest.sh PUT /_snapshot/${REPONAME} \
-H &#39;Content-Type: application/json&#39; \
-d &#39;{&quot;type&quot;: &quot;fs&quot;,&quot;settings&quot;: {&quot;compress&quot; : true, &quot;location&quot;: &quot;${BACKUPPATH}&quot;}}&#39;
</code></pre></div>
<p><code>o/p: {"acknowledged":true}</code></p>
<p><code>/opt/elasticsearch-7.10.1/probe/sendRequest.sh GET /_snapshot/_all?pretty</code></p>
<div class="highlight"><pre><span></span><code>o/p: { ${REPONAME} : { &quot;type&quot; : &quot;fs&quot;, &quot;settings&quot; : { &quot;compress&quot; :
&quot;true&quot;, &quot;location&quot; : ${BACKUPPATH} } } }
</code></pre></div>
<p>Where:</p>
<ul>
<li>${REPONAME} is the name of the snapshot repository, which will be used to register and manage the Elasticsearch 7 snapshot. The first time that you perform these steps, you must give the repository an appropriate name, for example, connectionsbackup.</li>
<li>${BACKUPPATH} is the mount path of the shared Elasticsearch 7 backup persistent volume (esbackup). By default this path is /backup.</li>
</ul>
<p>Disconnect from the pod (press Ctrl+D, or type <code>exit</code> and press Enter).</p>
</li>
<li>
<p>Connect to an Elasticsearch 7 client pod in the Elasticsearch 7 cluster by running the following command on a Kubernetes node:</p>
<p><code>kubectl exec -ti -n connections $(kubectl get pods -n connections -o wide | grep es-client-7 | awk '{print $1}' | head -n 1)  bash</code></p>
</li>
<li>
<p>Back up all Elasticsearch 7 indexes by running the following command:</p>
<p><code>/opt/elasticsearch-7.10.1/probe/sendRequest.sh PUT /_snapshot/${REPONAME}/snapshot_migration?wait_for_completion=true</code></p>
<p>Where ${REPONAME} is the name of the snapshot repository, which was previously used to register and manage the Elasticsearch 7 snapshot, for example, connectionsbackup.</p>
<p>Disconnect from the pod (press Ctrl+D, or type <code>exit</code> and press Enter).</p>
</li>
</ol>
<h2 class="section" id="setup_nfs">Set up OpenSearch and MongoDB volumes on NFS</h2>
<ol>
<li>
<p>Validate that Helm works properly:</p>
<p><code>helm list</code></p>
</li>
<li>
<p>Create additional OpenSearch volumes on the NFS master node.  The folders should be owned by user ID 1000 while you may set the ownership to your desired group:</p>
<div class="highlight"><pre><span></span><code>mkdir -p /pv-connections/opensearchmaster-{0,1,2}
mkdir -p /pv-connections/opensearchdata-{0,1,2}
mkdir -p /pv-connections/opensearchclient-{0,1,2}
mkdir -p /pv-connections/opensearchbackup
</code></pre></div>
<p>HCL Connections 8.0 uses OpenSearch as the default backend for Metrics and Search. For previous versions, persistent volumes have been defined to hold data. However, with OpenSearch, you need PVs for OpenSearch masters, OpenSearch data, OpenSearch client, and OpenSearch backup. The main reason for this is stability: without a persistent state, pod recreation can interfere with outdated data, causing OpenSearch to not start properly. The resulting TCP readiness check might summarize and report the whole OpenSearch system to be down then.</p>
</li>
<li>
<p>Similarly with MongoDB 7, you need PVs for all the replicas of mongo7 pod. So, create additional MongoDB volumes on the NFS master node.  The folders should be owned by user ID 1001 while you may set the ownership to your desired group:</p>
<div class="highlight"><pre><span></span><code>mkdir -p /pv-connections/mongo7-node-0
mkdir -p /pv-connections/mongo7-node-1
mkdir -p /pv-connections/mongo7-node-2
</code></pre></div>
</li>
<li>
<p>Make the additional OpenSearch and MongoDB 7 volumes available via NFS.</p>
</li>
<li>
<p>Download nfsSetup.sh and volumes.txt from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/third_party/nfs-install/templates/nfsSetupScript">HCL Connections deployment automation Git repository</a>.</p>
</li>
<li>
<p>Run nfsSetup.sh to set up NFS directories on the NFS master:</p>
<p><code>sh nfsSetup.sh</code></p>
<p>If applicable, make sure that the firewall configuration does not block access to NFS. Adjustments might be needed for Component Pack 8 deployment compared to the Component Pack 7 setup.</p>
</li>
<li>
<p>In /etc/exports, validate that the additional PVs are distributed properly.</p>
</li>
</ol>
<h2 class="section" id="uninstall_charts_k8s125">Uninstall charts before upgrading to Kubernetes v1.25</h2>
<p>As PodSecurityPolicy was deprecated in Kubernetes v1.21, and removed from Kubernetes in v1.25, the following charts should be uninstalled before upgrading to Kubernetes v1.25:</p>
<div class="highlight"><pre><span></span><code>k8s-psp
infrastructure
opensearch-master
opensearch-data
opensearch-client
kudos-boards-cp
</code></pre></div>
<p>First, check if the chart is already deployed:</p>
<p><code>helm ls --namespace connections | grep &lt;chart name&gt; | grep -i DEPLOYED</code></p>
<p>If found, delete the chart using below command:</p>
<p><code>helm uninstall &lt;chart name&gt; --namespace connections</code></p>
<p>For more details, see <a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG/CHANGELOG-1.25.md#podsecuritypolicy-is-removed-pod-security-admission-graduates-to-stable">PodSecurityPolicy is removed</a> in the Kubernetes changelog.</p>
<h2 class="section" id="harbor_repo">Log in to a Harbor OCI registry</h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For security reasons, CLI tokens generated through Harbor's OIDC integration are configured to expire after 30 days. To continue using CLI functionality after token expiration, you need to log out and log back in to Harbor through your OIDC provider to obtain a new token. This ensures continued secure access to Harbor services.</p>
</div>
<ol>
<li>
<p>Log in to a Harbor OCI registry using the following command:</p>
<p><code>$ helm registry login -u &lt;&lt;helm_repo_username&gt;&gt; -p &lt;&lt;helm_repo_password&gt;&gt; &lt;&lt;helm_repo_path&gt;&gt;</code></p>
<p>Where:</p>
<ul>
<li><code>&lt;&lt;helm_repo_username&gt;&gt;</code> is the Harbor username</li>
<li><code>&lt;&lt;helm_repo_password&gt;&gt;</code> is the CLI secret (to access, log in to Harbor, then click on your name &gt; <strong>User Profile</strong> &gt; CLI Secret)</li>
<li><code>&lt;&lt;helm_repo_path&gt;&gt;</code> is the Harbor repository to log into, that is https://hclcr.io</li>
</ul>
</li>
<li>
<p>Add Harbor credentials as Kubernetes secret.</p>
<p>In addition to the helm repo created in the previous step, Component Pack expects a Kubernetes secret containing the HCL Harbor credentials (in earlier versions, these are Docker registry credentials) by the name of <code>myregkey</code>:</p>
<ol>
<li>
<p>If this is your first time switching the Docker registry to Harbor, you'll need to recreate the secret named <code>myregkey</code>.</p>
<p>Start by deleting the credentials:</p>
<p><code>kubectl delete secret myregkey -n connections</code></p>
</li>
<li>
<p>Add Harbor credentials as <code>myregkey</code> Kubernetes secret.</p>
<p>The default for the <code>docker-server</code> parameter should be "hclcr.io", in order to point the installer to HCL Harbor for the containerd image downloads.</p>
<p><code>kubectl create secret docker-registry myregkey -n connections --docker-server=hclcr.io/cnx --docker-username=&lt;&lt;helm_repo_username&gt;&gt; --docker-password &lt;&lt;helm_repo_password&gt;&gt;</code></p>
<p>Where:</p>
<ul>
<li><code>&lt;&lt;helm_repo_username&gt;&gt;</code> is the Harbor username</li>
<li><code>&lt;&lt;helm_repo_password&gt;&gt;</code> is the CLI secret (to access, log in to Harbor, then click on your name &gt; <strong>User Profile</strong> &gt; CLI Secret)</li>
</ul>
</li>
</ol>
</li>
</ol>
<h2 class="section" id="psa_namespace">Apply Pod security restrictions at the namespace level</h2>
<p><strong>This step applies when installing on Kubernetes version 1.25.0 or higher:</strong></p>
<p>As PodSecurityPolicy was deprecated in Kubernetes v1.21, and removed from Kubernetes in v1.25, we are enforcing similar restrictions on Pods using Pod Security Admission. Kubernetes offers a built-in Pod Security admission controller to enforce the Pod Security Standards. We apply Pod security restrictions at the namespace level when pods are created using labels as below.</p>
<div class="highlight"><pre><span></span><code>kubectl label --overwrite ns connections \
pod-security.kubernetes.io/enforce=baseline pod-security.kubernetes.io/enforce-version=latest \
pod-security.kubernetes.io/warn=baseline pod-security.kubernetes.io/warn-version=latest \
pod-security.kubernetes.io/audit=baseline pod-security.kubernetes.io/audit-version=latest
</code></pre></div>
<p>We are applying baseline Pod Security Standards, which prevents known privilege escalations. It allows the default (minimally specified) Pod configuration.</p>
<p>For more details, see <a href="https://kubernetes.io/docs/concepts/security/pod-security-admission/">Pod Security Admission</a> and <a href="https://kubernetes.io/docs/concepts/security/pod-security-standards/">Pod Security Standards</a> in the Kubernetes documentation.</p>
<p><strong>If installing on Kubernetes version 1.25 or above is not feasible, then install/upgrade the k8s-psp Helm chart:</strong></p>
<ol>
<li>
<p>Start by finding out the k8s-psp chart version available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/k8s-psp --devel | grep "^version:"</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
<p><code>o/p version: 0.1.0-20210909-112534</code></p>
</li>
<li>
<p>Then install or upgrade:</p>
<p><code>helm upgrade k8s-psp &lt;&lt;oci_registry_url&gt;&gt;/k8s-psp -i --version 0.1.0-20210909-112534 --set namespace=connections --namespace connections --wait</code></p>
</li>
</ol>
<h2 class="section" id="setup_helm">Set up Helm charts</h2>
<p>Install or upgrade to the latest CR version of Connections 8.0 Kubernetes by deploying the Helm charts delivered with the latest CR version of Component Pack 8.</p>
<p>The <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> includes a set of templates to override the default values to values that are appropriate to your environment. The resulting files are the ones used by the following Helm upgrade commands using the -f option.</p>
<p>For example, if you want the opensearch cluster name to be "opensearch-cluster", you need to change the following line from this:</p>
<div class="highlight"><pre><span></span><code>clusterName:                {{ __opensearch_cluster_name }}
</code></pre></div>
<p>To this:</p>
<div class="highlight"><pre><span></span><code>clusterName:                opensearch-cluster
</code></pre></div>
<p>For sample values of these variables, refer to the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/vars/main.yml">HCL Connections deployment automation Git repository</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>
<p>In your connections-env.yml, use "connections" for the <code>namespace</code> parameter (<em>__default_namespace</em>). In a high available Kubernetes environment, the <code>replicaCount</code> (<em>__replica_count</em>) is set to "3".</p>
</li>
<li>
<p>In your values .yml files, use <code>hclcr.io/cnx</code> as the value for <code>image.repository</code> (<em>__docker_registry_url</em>).</p>
</li>
<li>
<p>If you do not have all installation options from your Connections 7.0 environment at hand, you can run the following command to retrieve this information from the deployed charts:</p>
<p><code>helm -n connections get values &lt;chart_name&gt;</code></p>
</li>
</ul>
</div>
<h2 class="section" id="pv_pvc">Set up persistent volumes and persistent volume claims on NFS</h2>
<p>Make sure that the network configuration of your NFS environment is correct before configuring the Connections PVs.</p>
<ol>
<li>
<p>Before installing the connections-volumes Helm chart to set up the persistence layer, delete the existing chart volumes:</p>
<p><code>helm uninstall connections-volumes -n connections</code></p>
<p>It might take some time to delete the existing volumes.</p>
</li>
<li>
<p>If you have upgraded the existing Component Pack 7 charts instead of deleting them and starting with a fresh Component Pack 8 installation, perform this step. Otherwise, skip to the next step.</p>
<p>This is because if you deleted all Component Pack 7 charts, the linked PVs and PVCs are properly removed and therefore do not need further action. However, if you upgraded the charts, you would need to manually touch those PVs and PVCs.</p>
<p>First, check the status of PVCs:</p>
<p><code>kubectl get pvc -n connections</code></p>
<p>If the Terminating status shows no progress, remove the persistent volume protection for all blocked elements to get them deleted:</p>
<p><code>kubectl patch pvc -n connections -p '{"metadata":{"finalizers": []}}' --type=merge &lt;NAME&gt;</code></p>
<p>For example:</p>
<p><code>kubectl patch pvc -n connections -p '{"metadata":{"finalizers": []}}' --type=merge es-pvc-es-data-7-0</code></p>
<p>If the <code>kubectl get pvc -n connections</code> command shows no more Terminating elements, proceed with installation below.</p>
</li>
<li>
<p>Install connections-volumes chart.</p>
<p>Find out the connections-volumes chart version that is available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/connections-persistent-storage-nfs --devel | grep "^version:"</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
<p><code>o/p version: 0.1.1-20220505-090030</code></p>
</li>
<li>
<p>Download the j2 template for connections-volumes.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In connections-volumes.yml, use your destination <strong>nfs.server</strong> and <strong>persistentVolumePath</strong> as parameters, as defined in <a href="#section_e4p_jrp_tnb">Set up NFS</a>. </p>
</div>
</li>
<li>
<p>Then, run installation:</p>
<p><code>helm upgrade connections-volumes &lt;&lt;oci_registry_url&gt;&gt;/connections-persistent-storage-nfs -i --version 0.1.1-20220505-090030 --namespace connections -f connections-volumes.yml --wait</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In connections-volumes.yml, use your destination <strong>nfs.server</strong> and <strong>persistentVolumePath</strong> as parameters.</p>
</div>
</li>
<li>
<p>Verify that all PVCs are in "bound" state:</p>
</li>
</ol>
<p><code>kubectl get pvc -n connections</code></p>
<p>For how to troubleshoot PV and PVC setup, see the <a href="https://opensource.hcltechsw.com/connections-doc/guide_me/how_to_guides/troubleshooting_cnx_cp.pdf">Troubleshooting Component Pack guide</a> document.</p>
<h2 class="section" id="bootstrap">Set up bootstrap charts</h2>
<p>The bootstrap chart not only defines the network interoperability parameters but also creates secrets and certificates for various components, including Redis, OpenSearch, MongoDB and Ingress Controller.</p>
<p>During the bootstrap installation, secrets will be created / overwritten under the following conditions:</p>
<ul>
<li>The force_regenerate_all flag is set to true. This will force the regeneration of all component secrets and certificates created by the bootstrap repository.</li>
<li>The specific component has <strong>not</strong> yet been deployed on the Kubernetes cluster.</li>
<li>
<p>One of the following targeted flags is set to <code>true</code>, which forces regeneration of secrets for the corresponding component only:</p>
<ul>
<li><code>force_regenerate_ingress</code>: Regenerates <code>ingress-nginx</code> secrets and certificates even if they already exist.</li>
<li><code>force_regenerate_mongo</code>: Regenerates <code>mongo</code> secrets and certificates even if they already exist.</li>
<li><code>force_regenerate_opensearch</code>: Regenerates <code>opensearch</code> secrets and certificates even if they already exist.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with v8 CR11, <code>force_regenerate</code> has been renamed to <code>force_regenerate_all</code>.</p>
<p>When <code>force_regenerate_all</code> is enabled, it takes precedence and will overwrite <strong>all</strong> secrets, regardless of the individual component flags.</p>
</div>
</li>
<li>
<p>Once bootstrap has been upgraded, remove or set the <code>force_regenerate_x</code> flags to false to prevent the certificates from being continuously regenerated which may lead to unexpected behavior.</p>
</li>
</ul>
<p>Depending on which certificates are regenerated, you may need to repeat specific configuration stepsfor example, re-establishing SSL interoperability with OpenSearch as described in <a href="#metrics_os">Set up Metrics for OpenSearch</a> and restarting the affected services.</p>
<ol>
<li>
<p>Start by deleting the existing chart:</p>
<p><code>helm uninstall bootstrap -n connections</code></p>
</li>
<li>
<p>Find out the bootstrap chart version available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/bootstrap --devel | grep "^version:"</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
<p><code>o/p version: 0.1.0-20220714-190047</code></p>
</li>
<li>
<p>Download the j2 template for bootstrap.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with v8 CR11, <code>user_provided_cert_SANs</code> must be specified in bootstrap.yml to set the Subject Alternative Name (SAN) in TLS certificates.  This should be a comma-separated string (eg. <code>'*.example.com,*.sub.example.com'</code>).</p>
<p>If the environment is running WebSphere Application Server FP27 or later, ensure that the SAN entries meet the <a href="https://www.ibm.com/support/pages/hostname-verification-websphere-application-server-traditional">certificates hostname verification requirements</a>.  The list typically includes the <code>set_master_ip</code> hostname specified in bootstrap.yml and, if applicable, the load balancer hostname (e.g., HAProxy).  Alternatively, wildcard entries can be used.</p>
<p>To comply with WebSphere certificate hostname verification, if the environment is upgraded from v8 CR10 or lower, the OpenSearch certificate must be regenerated.  Setting <code>force_regenerate_opensearch: true</code> in bootstrap.yml before upgrading will regenerate the certificates.  Be sure to re-establish SSL interoperability with OpenSearch and restart the related services afterwards.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the environment is upgraded from v8 CR10 or lower, set <code>force_regenerate_ingress: true</code> in bootstrap.yml upon the initial upgrade to generate the ingress controller certificate.  It can be disabled to prevent the certificates from being continuously regenerated which may lead to unexpected behavior.        </p>
</div>
</li>
<li>
<p>Run the bootstrap installation:</p>
<p><code>helm upgrade bootstrap &lt;&lt;oci_registry_url&gt;&gt;/bootstrap -i --version 0.1.0-20220714-190047 --namespace connections -f bootstrap.yml --wait</code></p>
</li>
</ol>
<h2 class="section" id="cnx_env">Set up connections-env chart</h2>
<p>The configmap for connections-env contains all the variables needed for the Customizer and Orient Me to function properly. Note that Customizer always points to the IBM HTTP Server directly, whereas Orient Me requests point to the front door proxy.</p>
<ol>
<li>
<p>Find out the connections-env chart version that is available on Harbor OCI:</p>
<div class="highlight"><pre><span></span><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/connections-env --devel | grep &quot;^version:&quot;
0.1.40-20220616-233100
</code></pre></div>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template for connections-env.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use "true" as the value for <code>onPrem</code> (<strong><em>___on_prem</em></strong>).</p>
</div>
</li>
<li>
<p>Run the connections-env installation:</p>
<p><code>helm upgrade connections-env &lt;&lt;oci_registry_url&gt;&gt;/connections-env -i --version 0.1.40-20220616-233100 --namespace connections -f connections-env.yml --wait</code></p>
</li>
</ol>
<h2 class="section" id="del_ingress">Delete ingresses</h2>
<p>Remove ingresses before Component Pack deployment, otherwise the infrastructure will fail:</p>
<p><code>kubectl delete ingress -n connections $(kubectl get ingress -n connections | awk '{print $1}' | grep -vE "NAME")</code></p>
<h2 class="section" id="inst_mongo7">Install MongoDB 7</h2>
<p>Perform the steps in <a href="installing_mongodb_7_for_component_pack_8.html">Installing MongoDB 7 for Component Pack 8</a>.</p>
<h2 class="section" id="infra_chart">Set up infrastructure charts</h2>
<p>The infrastructure charts are installed during MongoDB 7 installation (see previous step).</p>
<p>If this step fails, and if all pods don't come up, there is no point proceeding until this is fixed. To troubleshoot the Component Pack installation, check out the <a href="https://opensource.hcltechsw.com/connections-doc/guide_me/how_to_guides/troubleshooting_cnx_cp.pdf">Troubleshooting Component Pack</a> document.</p>
<p>Make sure to set up the rules to your httpd.conf on your IBM HTTP servers  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
<h2 class="section" id="section_n3c_xhj_dvb">Set up Customizer</h2>
<ol>
<li>
<p>Delete existing Customizer chart:</p>
<p><code>helm uninstall mw-proxy -n connections</code></p>
</li>
<li>
<p>Get the mw-proxy chart version that is available on Harbor OCI:</p>
<div class="highlight"><pre><span></span><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/mw-proxy --devel | grep &quot;^version:&quot;
o/p version: 0.1.0-20220414-134118
</code></pre></div>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template for customizer.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
</li>
<li>
<p>Install chart:</p>
<p><code>helm upgrade mw-proxy &lt;&lt;oci_registry_url&gt;&gt;/mw-proxy -i --version 0.1.0-20220414-134118 --namespace connections -f customizer.yml --wait</code></p>
</li>
<li>
<p>Set up your reverse proxy to forward some traffic to the customizer  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
</li>
</ol>
<p>Learn more about configuring Customizer in <a href="cp_config_customizer_intro.html">Configuring the Customizer component</a>.</p>
<h2 class="section" id="migrate_mongo5">Migrate MongoDB data</h2>
<p>Perform the steps in <a href="migrating_data_mongodb_v5_v7.html">Migrating data from MongoDB 5 to 7</a>, then start the Connections server back up to continue the upgrade.</p>
<h2 class="section" id="os_chart">Set up OpenSearch</h2>
<p>With Connections 8, OpenSearch replaces Elasticsearch 7 as the default backend for Metrics, OrientMe, and Search.</p>
<p>Installing the OpenSearch chart creates an additional secret  use the default secret from the bootstrap installation instead. See <a href="#bootstrap">Set up bootstrap charts</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OpenSearch, because of the way it is set up starting with version 8, will not work if bootstrap didn't create its secrets and certificates beforehand.</p>
</div>
<h3 id="prerequisites">Prerequisites</h3>
<ol>
<li>
<p>For production workloads, refer to <a href="https://opensearch.org/docs/1.3/opensearch/install/important-settings/">important settings</a> in the OpenSearch official documentation. Make sure Linux setting vm.max_map_count is set accordingly.</p>
<p>OpenSearch uses a lot of file descriptors or file handles. Running out of file descriptors can be disastrous and will most probably lead to data loss. Make sure to increase the limit on the number of open file descriptors for the user running OpenSearch to 65,536 or higher.</p>
<p>OpenSearch also needs a larger virtual address space to work properly. More then is usually configured on Linux distributions.</p>
<p>To increase these values to working levels, add the following lines to <code>/etc/sysctl.d/opensearch.conf</code>, creating the file on all Kubernetes hosts, if necessary:</p>
<p><code>vm.max_map_count=262144</code></p>
<p>Then run <code>sudo sysctl -p</code> to reload configurations. If possible, restart the host machines.</p>
</li>
<li>
<p>Review the official Elasticsearch documentation on <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-quorums.html">quorum-based election protocol</a> and <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/add-elasticsearch-nodes.html#add-elasticsearch-nodes-master-eligible">master-eligible nodes</a> before determining the number of master-eligible nodes for your cluster.</p>
</li>
</ol>
<h3 id="procedure">Procedure</h3>
<ol>
<li>
<p>Get the OpenSearch chart version that is available on Harbor OCI:</p>
<div class="highlight"><pre><span></span><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/opensearch --devel | grep &quot;^version:&quot;
o/p version: 1.3.0-20220520-092636
</code></pre></div>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 templates for opensearch_master.yml, opensearch_data.yml, and opensearch_client.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
</li>
<li>
<p>Before you start deploying opensearch chart, we recommend that you override the default password provided in the script. You can provide this user-defined password by adding or updating the following variable in the opensearch_master.yml, opensearch_data.yml, and opensearch_client.yml files:</p>
<p><code>pemkeyPass: PROVIDE-ANY-USER-DEFINED-PASSWORD</code></p>
</li>
<li>
<p>Install OpenSearch master:</p>
<p><code>helm upgrade opensearch-master &lt;&lt;oci_registry_url&gt;&gt;/opensearch -i --version 1.3.0-20220520-092636 --namespace connections -f opensearch_master.yml --wait --timeout 10m</code></p>
</li>
<li>
<p>Install OpenSearch data:</p>
<p><code>helm upgrade opensearch-data &lt;&lt;oci_registry_url&gt;&gt;/opensearch -i --version 1.3.0-20220520-092636 --namespace connections -f opensearch_data.yml --wait --timeout 10m</code></p>
</li>
<li>
<p>Install OpenSearch client:</p>
<p><code>helm upgrade opensearch-client &lt;&lt;oci_registry_url&gt;&gt;/opensearch -i --version 1.3.0-20220520-092636 --namespace connections -f opensearch_client.yml --wait --timeout 10m</code></p>
</li>
<li>
<p>Check if the OpenSearch master, data, and client pods are up and running:</p>
<p><code>kubectl get pods -n connections | grep -i "opensearch-cluster-"</code></p>
</li>
<li>
<p>This step is optional. Refer to the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/voting-config-exclusions.html">Voting configuration exclusions API</a>.</p>
<p>The default setting for this chart is to install three master nodes. If you wish to reduce this to just one master node during deployment, you can achieve that by utilizing the "voting_config_exclusions" API. This API reduces the voting configuration to include fewer than three nodes or remove more than half of the master-eligible nodes in the cluster at once by manually removing departing nodes from the voting configuration. For each specified node, the API will add an entry to the cluster's voting configuration exclusions list. It then waits until the cluster has reconfigured its voting configuration to exclude the specified nodes. For example, add nodes 'opensearch-cluster-master-1','opensearch-cluster-master-2' to the voting configuration exclusions list:</p>
<p><code>kubectl exec opensearch-cluster-master-0 -n connections -- bash -c "/usr/share/opensearch/probe/sendRequest.sh POST /_cluster/voting_config_exclusions?node_names=opensearch-cluster-master-1,opensearch-cluster-master-2"</code></p>
<p>If your cluster needs to reverse the voting configuration exclusions for nodes that you no longer needed, you can do so by using the DELETE voting_config_exclusions API as below:</p>
<p><code>kubectl exec opensearch-cluster-master-0 -n connections -- bash -c "/usr/share/opensearch/probe/sendRequest.sh DELETE /_cluster/voting_config_exclusions?wait_for_removal=false"</code></p>
</li>
<li>
<p>This step is optional. To prevent potential resource exhaustion from a growing volume of security audit logs, it is recommended to implement an Index State Management (ISM) retention policy to manage the lifecycle of audit log indices by deleting old data after a specified period, ensuring the cluster maintains optimal performance and avoids shard exhaustion.  For instructions on how to set it up, refer to the <a href="https://docs.opensearch.org/2.19/im-plugin/ism/api/">OpenSearch ISM API</a> and <a href="https://docs.opensearch.org/2.19/im-plugin/ism/policies">Policy</a> documentation.</p>
</li>
</ol>
<h2 class="section" id="migrate_es">Migrate ElasticSearch data</h2>
<p>Perform the steps in <a href="cp_migrate_data_from_es7_to_opensearch.html">Migrating data from Elasticsearch 7 to OpenSearch</a>.</p>
<h2 class="section" id="orientme_os">Set up Orient Me for OpenSearch</h2>
<p>Starting with Connections 8.0, the only backend for Orient Me is OpenSearch, so you need to update orientme and switch from Elasticsearch 7 to OpenSearch.</p>
<h3 id="prerequisites_1">Prerequisites</h3>
<ul>
<li>Infrastructure charts need to be already installed and all pods scheduled.</li>
<li>connections-env configmap needs to be already present.</li>
<li>OpenSearch needs to be installed and running.</li>
<li>After you install Orient Me, you need to run Profiles migration. In this step, we are migrating users from PeopleDB to MongoDB, which is used by Orient Me.</li>
<li>You need to set rewrite rules in httpd.conf on your IBM HTTP Server to enable sending requests to it from Connections.</li>
</ul>
<h3 id="procedure_1">Procedure</h3>
<ol>
<li>
<p>Get the orientme chart version that is available on Harbor OCI:</p>
<div class="highlight"><pre><span></span><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/orientme --devel | grep &quot;^version:&quot;
o/p version: 0.1.0-20220617-050009
</code></pre></div>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template for orientme.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a>, then update these settings:</p>
<ul>
<li><code>orient-indexing-service.indexing.opensearch=true and orient-indexing-service.indexing.elasticsearch=false</code></li>
<li><code>orient-retrieval-service.Retrieval.Opensearch=true and orient-retrieval-service.Retrieval.elasticsearch=false</code></li>
</ul>
</li>
<li>
<p>Install chart:</p>
<p><code>helm upgrade orientme &lt;&lt;oci_registry_url&gt;&gt;/orientme -i --version 0.1.0-20220617-050009 --namespace connections -f orientme.yml  --wait</code></p>
</li>
<li>
<p>Wait for all these parts to become ready:</p>
<p><code>kubectl get pods -n connections | grep -iE "orient|itm-services|community-suggestions|middleware-graphql|people-idmapping|people-migrate|people-relation|people-scoring|userprefs-service"</code></p>
</li>
<li>
<p>If you are upgrading to the latest CR version of Connections 8.0, perform these additional steps:</p>
<ol>
<li>
<p>Check if the Home page works fine from your browser by navigating to the /homepage URL.</p>
<p>If the page displays an error, delete the orient-web-client pods using the following command:</p>
<p><code>kubectl -n connections delete pod $(kubectl get pods -n connections | grep orient-web | awk '{print $1}')</code></p>
<p>After the pods have been recreated, check the Home page from your browser again.</p>
</li>
<li>
<p>Remove Elasticsearch 7 artifacts from your system:</p>
<p><code>helm uninstall -n connections elasticsearch7</code></p>
</li>
</ol>
</li>
<li>
<p>To migrate profiles, run this:</p>
<p><code>kubectl exec -n connections -it $(kubectl get pods -n connections | grep people-migrate | awk '{print $1}') -- sh -c "npm run start migrate"</code></p>
<p>If you followed examples and the order of installation, this should work out of the box. If you want to do some customizations, or if you are later changing the database, you can open an interactive terminal session inside the people-migrate pod to see the configuration that was precreated for you during the installation/upgrade of Component Pack in /usr/src/app/migrationConfig.</p>
</li>
<li>
<p>Set the rewrite rules to the httpd.conf on your IBM HTTP Server  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
</li>
</ol>
<p>Learn more about configuring Orient Me in <a href="cp_config_om_intro.html">Configuring the Orient Me component</a>.</p>
<h2 class="section" id="metrics_os">Set up Metrics for OpenSearch</h2>
<h3 id="prerequisites_2">Prerequisites</h3>
<p>Component Pack for the latest CR version of HCL Connections 8.0 comes with OpenSearch enabled by default  this is the only backend for Metrics starting from Connections 8.0. If you are upgrading from Connections 7.0, you need to update Metrics and switch from the Elasticsearch 7 service in your Component Pack 7 deployment, to OpenSearch for the latest CR version of Component Pack 8.</p>
<p>If you are on HCL Connections 6.5.0.1 or earlier, and using ElasticSearch 5, there are two options:</p>
<ul>
<li>If you don't need to migrate data, you can use the preceding links to configure the Metrics component to use the newly installed OpenSearch.</li>
<li>Migrate to Elasticsearch 7 first, then migrate to OpenSearch.</li>
</ul>
<p>Before configuring Metrics, make sure that your WebSphere Application servers are up and running.</p>
<h3 id="procedure_2">Procedure</h3>
<ol>
<li>
<p>To ensure a secure connection, retrieve the PKCS12 and CA Signer certificates by running the following commands on the Component Pack master node:</p>
<p><code>mkdir -p /tmp/es_certs</code></p>
<p><code>kubectl get secret opensearch-secret -n connections -o=jsonpath="{.data['chain-ca\.pem']}" | base64 -d &gt; "/tmp/es_certs"/chain-ca.pem</code></p>
<p><code>kubectl get secret opensearch-secret -n connections -o=jsonpath="{.data['opensearch-metrics\.p12']}" | base64 -d &gt; "/tmp/es_certs"/opensearch-metrics.p12</code></p>
</li>
<li>
<p>Temporarily remove SSL settings that were configured for type-ahead search in your Connections deployment, so that you can successfully enable Metrics. When you configure Metrics, the SSL settings will be recreated and both features will share the certificate information.</p>
<ol>
<li>
<p>Log in to the WebSphere Integrated Solutions Console for the type-ahead search cluster.</p>
</li>
<li>
<p>Click <strong>Security</strong> &gt; <strong>SSL certificate and key management</strong> &gt; <strong>Dynamic outbound endpoint SSL configurations</strong> and, for each cluster member, delete any endpoints starting with <strong>SSLToES and SearchToES</strong>.</p>
</li>
<li>
<p>Click <strong>Security</strong> &gt; <strong>SSL certificate and key management</strong> &gt; <strong>SSL configurations</strong>, and delete the <strong>ESCloudSSLSettings</strong>and <strong>ESSearchSSLSettings</strong> configuration.</p>
</li>
<li>
<p>Click <strong>Security</strong> &gt; <strong>SSL certificate and key management</strong> &gt; <strong>Key stores and certificates</strong> and delete the <strong>ESCloudKeyStore</strong> and <strong>ESSearchKeyStore</strong> configuration.</p>
</li>
</ol>
</li>
<li>
<p>Copy the certificate files to the WebSphere Deployment Manager in a common location that is readable and writable by all WebSphere Application Server nodes.</p>
<p>For example, copy the two certificate files created in step 1 (that is, <strong>/tmp/es_certs/chain-ca.pem</strong> and <strong>/tmp/es_certs/elasticsearch-metrics.p12</strong>) to the following directory: <strong>/opt/IBM/es_certs</strong> on the WebSphere Deployment Manager.</p>
<p>If this directory path does not yet exist, create it.</p>
</li>
<li>
<p>Configure OpenSearch metrics within Connections:</p>
<ol>
<li>
<p>On the WebSphere Deployment Manager, open wsadmin, making sure that you use the <code>-lang jython</code> option. For example, on Linux, run the following commands to open wsadmin:</p>
<pre><code>cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin
sudo sh wsadmin.sh -lang jython -user wasadmin_user -password wasadmin_password
</code></pre>
</li>
<li>
<p>Merge the Signer certificate into the opensearch-metrics.p12 keystore:</p>
<pre><code>execfile('esSecurityAdmin.py')  
enableSslForMetrics('KEYSTORE_FULL_PATH', 'OpenSearch_CA_PASSWORD', 'SIGNER_CA_FULL_PATH', 'OpenSearch_HTTPS_PORT')
</code></pre>
<p>Where:</p>
<ul>
<li>KEYSTORE_FULL_PATH: See the following example.</li>
<li>SIGNER_CA_FULL_PATH: See the following example.</li>
<li>OpenSearch_CA_PASSWORD: The password that was set while <a href="#bootstrap">setting up bootstrap charts</a>.</li>
<li>OpenSearch_HTTPS_PORT: Find the port by running following command on the Component Pack System:</li>
</ul>
<p><code>kubectl get svc opensearch-cluster-master --namespace=connections -o jsonpath={.spec.ports[*].nodePort}</code></p>
<p>For example:</p>
<pre><code>execfile('esSecurityAdmin.py')
enableSslForMetrics('/opt/IBM/es_certs/opensearch-metrics.p12', 'password', '/opt/IBM/es_certs/chain-ca.pem', '30099')
</code></pre>
<p>Disconnect from the wsadmin environment with <strong>quit</strong>.</p>
</li>
<li>
<p>Copy the updated opensearch-metrics.p12 file from the Deployment Manager to the same location on the WebSphere Application Server nodes.</p>
</li>
<li>
<p>Synchronize the nodes and then restart the servers or clusters that are running the Search and common applications (including the Deployment Manager and nodes).</p>
</li>
<li>
<p>Enable or switch to OpenSearch Metrics. The following script causes the RDBMS-based app to stop capturing data, and the OpenSearch component to start capturing it.</p>
<ol>
<li>
<p>On the WebSphere Deployment Manager, open wsadmin, making sure that you use the <code>-lang jython</code> option. For example, on Linux, run the following commands to open wsadmin:</p>
<div class="highlight"><pre><span></span><code>cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin
sudo sh wsadmin.sh -lang jython -user wasadmin_user -password wasadmin_password
</code></pre></div>
</li>
<li>
<p>Switch users to the OpenSearch Metrics component:</p>
<div class="highlight"><pre><span></span><code>execfile(&#39;metricsEventCapture.py&#39;)
switchMetricsToElasticSearch()
</code></pre></div>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Manage the Elasticsearch index for Connections type-ahead search. The type-ahead search feature uses an index named quickresults within the OpenSearch search engine.</p>
<ol>
<li>
<p>On the WebSphere Deployment Manager, open wsadmin, making sure that you use the <code>-lang jython</code> option. For example, on Linux, run the following commands to open wsadmin:</p>
<pre><code>cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin
sudo sh wsadmin.sh -lang jython -user wasadmin_user -password wasadmin_password
</code></pre>
</li>
<li>
<p>Merge the Signer certificate into the opensearch-metrics.p12 keystore:</p>
<pre><code>execfile('esSearchAdmin.py')  
enableSslForESSearch('KEYSTORE_FULL_PATH', 'OpenSearch_CA_PASSWORD', 'SIGNER_CA_FULL_PATH', 'OpenSearch_HTTPS_PORT')
</code></pre>
<p>Where:</p>
<ul>
<li>KEYSTORE_FULL_PATH: See the following example.</li>
<li>SIGNER_CA_FULL_PATH: See the following example.</li>
<li>OpenSearch_CA_PASSWORD: The password that was set while <a href="#bootstrap">setting up bootstrap charts</a>.</li>
<li>
<p>OpenSearch_HTTPS_PORT: Find the port by running following command on the Component Pack System:</p>
<p><code>kubectl get svc opensearch-cluster-master --namespace=connections -o jsonpath={.spec.ports[*].nodePort}</code></p>
</li>
</ul>
<p>For example:</p>
<pre><code>execfile('esSearchAdmin.py')
enableSslForESSearch('/opt/IBM/es_certs/opensearch-metrics.p12', 'password', '/opt/IBM/es_certs/chain-ca.pem', '30099')
</code></pre>
<p>Disconnect from the wsadmin environment with <strong>quit</strong>.</p>
</li>
<li>
<p>Copy the updated opensearch-metrics.p12 file from the Deployment Manager to the same location on the WebSphere Application Server nodes.</p>
</li>
<li>
<p>Download config_blue_metrics.py from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/files/config_blue_metrics.py">HCL Connections deployment automation Git repository</a>. This script sets the OpenSearch server base URL in Metrics.</p>
</li>
<li>
<p>Run the following script on the Connections Component Pack system. This will set highway settings for Connections to connect to OpenSearch:</p>
<pre><code>/usr/bin/python3 config_blue_metrics.py --skipSslCertCheck true --pinkhost &lt;&lt;hostname&gt;&gt; --namespace connections
</code></pre>
<p>Where:</p>
<ul>
<li><code>--skipSslCertCheck</code>: Set to true. Use on systems that use self-signed SSL certificates.</li>
<li><code>--pinkhost</code>: Set to the fully qualified domain name (FQDN) of the Kubernetes master. This would be the fronting Kubernetes master load balancer or virtual IP in a HA environment.</li>
<li>
<p><code>--namespace</code>: Set to <code>connections</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If Connections is configured to force traffic to use TLS 1.3, Python 3.7 or later is required to be the default for Python3</p>
</div>
</li>
</ul>
</li>
<li>
<p>Connect to wsadmin and initialize Search Administration before running the actual wsadmin command.</p>
<p>Open wsadmin and start the Search service by running the following commands. On Linux, for example, run:</p>
<pre><code>cd /opt/IBM/WebSphere/AppServer/profiles/Dmgr01/bin./wsadmin.sh -lang jython -user User_name -password Password execfile('searchAdmin.py')

SearchService.createES7QuickResultsIndex()
</code></pre>
<p>For information on running SearchService commands, see <a href="../admin/r_admin_searchservice_commands.html">SearchService commands</a>.</p>
</li>
<li>
<p>Update the LotusConnections-config.xml file in the Deployment Manager profile configuration folder. Add the following statement to the <code>&lt;properties&gt;</code> section of the file:</p>
<p><code>&lt;genericProperty name="quickResultsEnabled"&gt;true&lt;/genericProperty&gt;</code></p>
</li>
<li>
<p>Update the search-config.xml file in the Deployment Manager profile configuration folder. Add the following statements to the <code>&lt;propertySettings&gt;</code>:</p>
<div class="highlight"><pre><span></span><code>&lt;property name=&quot;quickResults&quot;&gt;
   &lt;propertyField name=&quot;quick.results.elasticsearch.indexing.enabled&quot; value=&quot;true&quot;/&gt;
   &lt;propertyField name=&quot;quick.results.solr.indexing.enabled&quot; value=&quot;false&quot;/&gt;
   &lt;propertyField name=&quot;quick.results.use.solr.for.queries&#39;\&quot; value=&quot;false&quot;/&gt;
   &lt;propertyField name=&quot;quick.results.elasticsearch7.writing.enabled&quot; value=&quot;true&quot;/&gt;
   &lt;propertyField name=&quot;quick.results.elasticsearch7.reading.enabled&quot; value=&quot;true&quot;/&gt;
&lt;/property&gt;
</code></pre></div>
</li>
<li>
<p>Synchronize the nodes and then restart the servers or clusters that are running the Search and common applications (including the Deployment Manager and nodes).</p>
</li>
</ol>
</li>
<li>
<p>To validate your OpenSearch and Metrics integration after system is up and running again, open a browser window and authenticate with a user account that has appropriate rights for Metrics. Navigate to the <strong>/metrics</strong> URL.</p>
</li>
</ol>
<p><strong>Configuring Metrics</strong></p>
<p>For optional procedures to configure Metrics, see <a href="cp_config_os_intro.html">Configuring the OpenSearch Metrics component</a>.</p>
<h2 class="section" id="comm_ingress">Set up community ingress</h2>
<ol>
<li>
<p>If not already added, add the community Helm repository:</p>
<p><code>helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx</code></p>
</li>
<li>
<p>Update the ingress-nginx Helm repository:
      <code>helm repo update ingress-nginx</code></p>
</li>
<li>
<p>Install ingress-nginx:</p>
<p><code>helm upgrade cnx-ingress -i ingress-nginx/ingress-nginx --namespace connections --set controller.service.type=NodePort,controller.service.nodePorts.http=32080,controller.service.nodePorts.https=32443,defaultBackend.enabled=true,controller.healthStatus=true,controller.healthCheckPath="/healthz",controller.livenessProbe.timeoutSeconds=60,controller.readinessProbe.timeoutSeconds=60 --set controller.extraArgs.default-ssl-certificate=connections/ingress-nginx-tls-secret --wait</code></p>
<p>Where <code>default-ssl-certificate</code> is <code>&lt;namespace&gt;/&lt;TLS secret name&gt;</code>.  By default it is <code>connections/ingress-nginx-tls-secret</code>.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Starting with v8 CR11, bootstrap automatically generates a self-signed certificate for ingress-nginx in secret <code>ingress-nginx-tls-secret</code>.</p>
</div>
<h2 class="section" id="teams_integ">Set up Microsoft Teams integration</h2>
<p>The Microsoft Teams integration microservices rely on a configmap (integrations-msteams-env) and secret (ms-teams-secret) that are part of the overall connections-env deployment. Three specific pieces of information are required which should have been created and noted while performing the steps in <a href="../../connectors/admin/t_ms_teams_config_azure_app.html">Configuring an Azure app to support the Microsoft Teams app</a>.</p>
<p>The items of information needed for this setup are:</p>
<ul>
<li>Teams tenant ID</li>
<li>Bot (app) ID</li>
<li>Bot (app) password (secret)</li>
</ul>
<p>With this information, if the values were not provided when installing the <a href="cp_install_services_tasks.html#cnx_env">connections-env</a> chart, update the connections-env.yml configuration override file and reinstall the chart.</p>
<p>Once the configmap and secret are configured, continue to install the microservices that rely on them for configuration.</p>
<ol>
<li>
<p>Get the Teams chart version that is available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/teams --devel | grep "^version:"
     o/p version: 1.0.0-20220818-170013</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template for teams.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
</li>
<li>
<p>Install the chart:</p>
<p><code>helm upgrade teams &lt;&lt;oci_registry_url&gt;&gt;/teams -i --version 1.0.0-20220818-170013 --namespace connections -f teams.yml --wait</code></p>
</li>
</ol>
<p>Once the microservices are installed and running, set up rules in httpd.conf on the IBM HTTP Server  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
<p>The proxy pass statements map URI to the ingress controller service to route requests to the appropriate Microsoft Teams-related micro-services. Given tightening security of more recent versions of browser, especially Chrome (or Chromium-based browsers) and the use of embedded iFrames by Microsoft Teams, passing cookies correctly between the environments requires the SameSite=None and Secure property.</p>
<p>For more information about the SameSite property,  see:</p>
<ul>
<li><a href="https://www.ibm.com/support/pages/browser-changes-samesite-cookie-handling-and-websphere-application-server">Browser changes to SameSite cookie handling and WebSphere Application Server</a></li>
<li><a href="https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-03#section-4.1.2.7">Cookies: HTTP State Management Mechanism (RFC6265-bis)</a></li>
</ul>
<p>Lastly, and again for security reasons, you must change the x-frame-options header to support the way that Microsoft Teams uses an iFrame to embed application content in the tabbed pages. Since Connections also uses an iFrame to display embedded experiences content, this becomes an iFrame within an iFrame. The embedded experiences content cannot be displayed if SAMEORIGIN is used because the Teams UI and Embedded Experiences content do not share a common origin host.</p>
<p>To enable Microsoft Teams integration, see <a href="../../connectors/admin/t_ms_teams_set_up_conn_app_for_ms.html">Setting up the Connections app for the Microsoft Teams client</a>.</p>
<h2 class="section" id="comm_tailored">Set up Tailored Experience features for communities</h2>
<ol>
<li>
<p>Get the Tailored Experience chart version that is available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/tailored-exp  --devel | grep "^version:" 
     o/p version: 1.0.0-20220818-170013</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template for tailoredexperience.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
</li>
<li>
<p>Install the chart:</p>
<p><code>helm upgrade tailored-exp &lt;&lt;oci_registry_url&gt;&gt;/tailored-exp -i --version 1.0.0-20220818-170013 --namespace connections -f tailoredexperience.yml --wait</code></p>
</li>
<li>
<p>Once this is all set, set up rules in the httpd.conf on the IBM HTTP servers  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
</li>
</ol>
<p>For post-installation tasks required to deploy the community creation wizard and templates, see <a href="t_configure_community_wizard.html">Configuring the community creation wizard</a> and <a href="../admin/t_admin_comm_templates_assign_admins.html">Assigning administrators to template management roles</a>.</p>
<h2 class="section" id="lotusxml">Configure the LotusConnections-config.xml</h2>
<ol>
<li>Start the wsadmin command. Refer to <a href="../admin/t_admin_wsadmin_starting.html">Starting the wsadmin client</a>.</li>
<li>
<p>Load the IBM Connections configuration file:</p>
<p><code>execfile("connectionsConfig.py")</code></p>
<p>If you are prompted to specify a service to connect to, type 1 to select the first node in the list. Most commands can run on any node. If the command writes or reads information to or from a file using a local file path, you must select the node where the file is stored. This information is not used by the wsadmin client when you are making configuration changes.</p>
</li>
<li>
<p>Check out the IBM Connections configuration files:</p>
<p><code>LCConfigService.checkOutConfig("working_directory","cell_name")</code></p>
<p>Where:</p>
<ul>
<li>working_directory is the temporary working directory to which configuration files are copied. The files are kept in this working directory while you edit them.</li>
<li>
<p>cell_name is the name of the WebSphere Application Server cell that hosts the HCL Connections application. If you do not know the cell name, display it by typing the following command in the wsadmin client:</p>
<pre><code>print AdminControl.getCell()
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you specify a path to the working directory on a system that is running Microsoft Windows, use a forward slash for the directory. For example, <code>C:/temp</code>. On Linux, the directory must grant write </p>
</div>
</li>
</ul>
</li>
<li>
<p>Open the checked-out LotusConnectionsConfig.xml file in an XML editor of your choice and add the property componentPackInstalled to the &lt;properties&gt; &lt;/properties&gt; tag as shown below:</p>
<div class="highlight"><pre><span></span><code>&lt;properties&gt;
   &lt;genericProperty name=&quot;ignore.lang.param&quot;&gt;true&lt;/genericProperty&gt;
   &lt;genericProperty name=&quot;elasticsearch.eSmajorVersion&quot;&gt;7&lt;/genericProperty&gt;
   &lt;genericProperty name=&quot;people.typeahead&quot;&gt;enabled&lt;/genericProperty&gt;
   &lt;genericProperty name=&quot;lconn.core.WidgetPlacement.communities.useCRE&quot;&gt;true&lt;/genericProperty&gt;
   &lt;genericProperty name=&quot;componentPackInstalled&quot;\&gt;true&lt;/genericProperty\&gt;
   &lt;genericProperty name=&quot;lconn.core.WidgetPlacement.profiles.useCRE&quot;&gt;true&lt;/genericProperty&gt;
&lt;/properties&gt;
</code></pre></div>
</li>
<li>
<p>Save and check in the LotusConnections-config.xml file:</p>
<p><code>LCConfigService.checkInConfig()</code></p>
<p>The file is validated, and you are notified if an error is found.</p>
</li>
<li>
<p>To exit the wsadmin client, type <code>exit</code> at the prompt.</p>
</li>
<li>
<p>Deploy the changes by doing a <strong>Fully Resynchronize</strong> of the nodes on WebSphere Admin Console (<a href="https://%3chost_name%3e:9043/ibm/console">https://</a>).</p>
</li>
<li>
<p>Stop and restart the servers that host the IBM Connections applications.</p>
</li>
</ol>
<h2 class="section" id="activities_plus">Set up Activities Plus</h2>
<h3 id="prerequisites_3">Prerequisites</h3>
<ul>
<li>Get a free license from the store.huddo.com</li>
<li>Register it with Connections as described in <a href="cp_3p_config_ap_oauth.html">Registering an OAuth application with a provider</a> in the Integrating Activities Plus section.</li>
</ul>
<h3 id="procedure_3">Procedure</h3>
<p>For steps to set up Activities Plus, refer to <a href="cp_3p_install_ap_services.html">Installing Activities Plus services</a>.</p>
<p>To move existing activities to Activities Plus, see <a href="cp_3p_migrate_activities_data.html">Migrating Activities data</a></p>
<p>You can find out more about Activities Plus in <a href="cp_3p_integrate_intro.html">Integrating with Activities Plus</a>.</p>
<h2 class="section" id="ms_outlook_addin">Set up Connections add-in for Microsoft Outlook</h2>
<h3 id="prerequisites_4">Prerequisites</h3>
<ul>
<li>Verify that <a href="../../connectors/admin/c_outlook_connector_addin_sys_req.html">Connections Outlook Add-in system requirements</a> are met.</li>
<li><a href="cp_3p_outlook_addin_oauth.html">Register the Outlook Add-in OAuth application provider with Connections</a>.</li>
</ul>
<h3 id="procedure_4">Procedure</h3>
<ol>
<li>
<p>Delete the existing connections-outlook-desktop chart:</p>
<p><code>helm uninstall connections-outlook-desktop -n connections</code></p>
</li>
<li>
<p>Get the connections-outlook-desktop chart version that is available on Harbor OCI:</p>
<p><code>helm show all &lt;&lt;oci_registry_url&gt;&gt;/connections-outlook-desktop --devel | grep "^version:" 
     o/p version: 0.1.0-20220707-082629</code></p>
<p>Where <code>&lt;&lt;oci_registry_url&gt;&gt;</code> is the Harbor OCI container registry uri, that is <code>oci://hclcr.io/cnx</code>. This applies to other instances of <code>&lt;&lt;oci_registry_url&gt;&gt;</code> in the following steps.</p>
</li>
<li>
<p>Download the j2 template outlook-addin.yml from the <a href="https://github.com/HCL-TECH-SOFTWARE/connections-automation/tree/main/roles/hcl/component-pack-harbor/templates/helmvars">HCL Connections deployment automation Git repository</a> and modify it according to your environment.</p>
</li>
<li>
<p>Update the add-in Docker environment variables, which are located in the outlook-addin.yaml file. These are passed into the Outlook add-in Docker instance on startup:</p>
<ul>
<li>
<p>What must be overriden:</p>
<ul>
<li>CONNECTIONS_URL - URL of your Connections environment without a trailing slash (eg [https://my.connections.server.com](https://my.connections.server.com%5C)). The same URL has to be used when generating secret in the first step.</li>
<li>CONNECTIONS_CLIENT_SECRET - Client secret generated by Connections when registering OAuth provider in the first step.</li>
<li>CONNECTIONS_CLIENT_ID - Client ID (aka. app ID) used when registering OAuth provider in Connections in the first step (default: hcl-cnx-office-addin)</li>
</ul>
</li>
<li>
<p>What may be overriden:</p>
<ul>
<li>CONTEXT_ROOT - The path to where the Outlook add-in is being served, relative to the CONNECTIONS_URL. Do NOT start or end with `/. (default: outlook-addin)</li>
<li>SUPPORT_URL - URL that a user can go to for support (help). (default: [https://opensource.hcltechsw.com/connections-doc/connectors/enduser/c_ms_plugins_add_in_outlook.html](https://opensource.hcltechsw.com/connections-doc/connectors/enduser/c_ms_plugins_add_in_outlook.html%5C))</li>
<li>CONNECTIONS_NAME  A custom name for the add-in. (default: 'HCL Connections')</li>
<li>EWS_HOSTNAME  The hostname for Exchange Web Services. (default: 'outlook.office365.com')</li>
</ul>
</li>
<li>
<p>Take care about ingresses listed there. You should point to both frontend domain and internal domains, if both are used. Otherwise, only point to the one that is used in your case.</p>
</li>
</ul>
</li>
<li>
<p>Install chart:</p>
<p><code>helm upgrade connections-outlook-desktop &lt;&lt;oci_registry_url&gt;&gt;/connections-outlook-desktop -i --version 0.1.0-20220707-082629 --namespace connections -f outlook-addin.yml --wait</code></p>
</li>
<li>
<p>Once this is all set, add rules to httpd.conf for your IBM HTTP servers  see <a href="cp_config_proxy_rules.html">Configuring the HTTP server</a>.</p>
</li>
</ol>
<p>To enable the Connections add-in for Microsoft Outlook, see <a href="cp_3p_outlook_make_available_to_users.html">Making the Connections Add-in for Outlook available to users</a>.</p>
<ul>
<li><strong><a href="installing_mongodb_7_for_component_pack_8.html">Installing MongoDB 7 for Component Pack 8</a></strong>
  Install MongoDB 7 for the latest CR version of Component Pack 8.</li>
<li><strong><a href="migrating_data_mongodb_v5_v7.html">Migrating data from MongoDB 5 to 7</a></strong>
  Back up, migrate and validate your MongoDB databases.</li>
<li><strong><a href="cp_migrate_data_from_es7_to_opensearch.html">Migrating data from Elasticsearch 7 to OpenSearch</a></strong>
  To preserve the Metrics, Orient Me, and Recent History data stored in Elasticsearch 7 for your Connections 7 deployment, you must migrate that data to the OpenSearch service provided with Component Pack for the latest CR version of Connections 8.0.</li>
</ul>
<p><strong>Parent topic:</strong> <a href="cp_install_upgrade_container.html">Installation and upgrade</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
 
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-hcl md-grid1">
     <a href="https://www.hcltechsw.com/legal/disclaimer" class="nav-link footer-launch" target="_blank">Disclaimer</a>
	 <a href="https://www.hcltechsw.com/legal/privacy" class="nav-link footer-launch" target="_blank">Privacy</a>
	 <a href="https://www.hcltechsw.com/legal/terms-use" class="nav-link footer-launch" target="_blank">Terms of use</a>
	 
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.instant", "navigation.prune", "search.highlight", "search.share", "search.suggest", "navigation.prune", "content.code.copy", "content.action.edit"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../../javascripts/current.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>